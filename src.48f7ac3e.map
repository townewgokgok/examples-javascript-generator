{"version":3,"sources":["src/inn.ts","src/vector.ts","src/guide.ts","src/basic.ts","src/concurrent.ts","src/recursion.ts","src/index.ts"],"names":[],"mappings":"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AFQV,CGRZ,CHQc,EERd,CFQE;AGPF,ADAA,AFQE,IGRI,ADAF,KAAJ,CCAY,CHQH,IGRQ,CAAjB,GHQE;AGPF,ADCA,AFOE,IGRI,KAAK,ADCX,KCDgB,ADChB,CCDA,CHQc,CEPd,GFOE;AGDF,ACXA,AFME,AFOD,CAND,GIPA,KDWA,GDLU,CAAE,EENZ,EDWA,GAAA,ADLU,CAAR,UENF,QAAA,UAAA,CAAA,CAAA;AAEA,AFME,AFOF,IIbM,AJaF,OIbS,EFMX,AFOF,CIbA,KFME,GAAA;AELF,AFMI,AFOJ,AKhBA,IDGM,ACHN,KLgBA,IEPqB,CENL,CCHhB,EHSqB,CEND,IFMC,CAAA,CFOrB,CEPqB,EEND,AJapB,IKhBA,GDGgB,CAAW,AFMN,IGTrB,CHSI,EEN8B,AFMb,EENL,EAAsB,CFMjB,EGTrB,CAAA,CAAA,EDG6C,EAA7B,AFMK,CENrB,KFMI,EAAiB,IAAjB,EAAsB;AEL1B,AFKS,AFQP,AKfF,IDEM,ACFA,ILeE,EKfI,ELeA,CKfZ,EDEiB,CFKJ,GELQ,EJaA,EERJ,KELI,GFKJ,EAAA,CAAR,CELQ,AJaL,CIbgB,AJaQ,OIbD,EAAlB,EAAsB,EJa3B,CAAV,IIb4C,EAA7B,CAAjB;ADQE,ACPF,AFI4B,AFS1B,AKfF,IDEM,ACFA,ELeF,KAAF,AKfW,CLeH,EKfV,GHMiC,CEJb,GFIQ,CEJJ,AJatB,CGNA,CAAA,CAAA,AHMqB,CGNrB,KCPsB,GJaM,CGN5B,EAAM,CCPY,CDOV,ACPqB,IJaR,EGNP,CCPsB,AJaC,EIbnB,CDOZ,CCPkC,AJanB,CGND,EHMsB,IGNhB,ACPqB,EAA7B,CAApB,EJauB,GAA8B,IAA9B,GAAmC,SAAnC,GAA4C,GAAjE;AGLgC,ACPlC,AFGuC,AFUtC,AKdD,IDCM,KCDN,IAAA,CAAgB,CAAhB,EDCmB,ACDM,IDCF,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAAnB;ADMQ,ACLR,AFGI,AFWJ,IIdM,KJcN,OAAA,CGTE,AHSgB,CGThB,ADFY,ECEoB,AHSlC,EAA6B,CIdJ,CAAzB,gBFGoC,MAAtB,CAAV;AEDJ,AFEG,AFWD,IIbF,IJaQ,IAAI,CIbZ,QJaqB,KIbrB,QJaY,CAAuB,GIbnC,EJaY,CAAV;AGVA,ACCA,AFAA,AFUA,MAAE,OIVF,CFAU,GFUV,EGXA,ACCA,CAAa,AJUG,GGXhB,AHWA,EIVA,EDDgC,ACCJ,GAA5B,EAAuC,IFAP,MAAtB,CAAV;ACAgC,ACC9B,AFAH,AFUC,aIVO,AJUE,KIVP,GAAa,KAAb,CJUF,CAAwB,aAAxB,EAAuC,WAAvC,CAAmD,CAAnD;AGVA,ACCE,AFVJ,AFoBC,QEpBD,KEUS,AFVT,GEUI,AFVJ,GEUe,EFVf,CGCM,CFQJ,ACCiB,CDDjB,AERM,CFQN,CAAA,ECCa,ACTT,EDSF,ICTc,CFQhB,EAAM,EAAE,CERJ,KFQU,EERV,CAAA,CAAA,CFQE,AERF,EFQiB,MAAM,CERvB,CFQE,CERF,CFQJ,AERI,CFQJ,AERI;ADUH,AFAH,AFWA,AKpBI,ILoBA,KEXJ,IAAA,GAAA,CFWA,MKpBI,CAAA,CAAA,CAAA,SAAA,EAAM;AFMwB,ACK/B,AFDD,AFYF,AKrBY,ILqBR,IEZE,GECH,GJWmB,CEZpB,EAAa,CFYf,EIXG,CAAA,IAAA,GAAD,UAAO,AFD2B,EEClC,EAAiB,GFDJ;ACHb,ADIA,AFaF,AKxBI,SLwBJ,KEbY,AFaZ,GAAA,AKxBI,CHWF,CCJA,AEPU,IFOV;AACA,ADIA,AFaA,WAAO,CEbC,EAAR,KFaA,IGjBA,CAAA,CAAA,CAAA,SAAA,EAAM,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;ADKA,AFaA,AK1BE,gBL0BU,GK1BV,CL0BF,GK1BE,IAAQ;AFQV,ADMD,AFaC,AK1BU,cL0BA,IAAV,CGnBA,IAAA;AACA,ACGQ,AFHV,AFmBE,AK1BE,QHOJ,IAAA,GAAA,CFmBc,GEnBd,AFmBE,IGnBA,AEPE,CFOF,AEPE,CFOF,AEPE,CFOF,AEPE,KDUiB,GAAG,CDHtB,CEPE,CFOI,ACGa,ACVjB,CDUwB,CDHlB,AEPC,IDUsB,EDHjB,CCGK,CAAX,EDHF,EAAc,MAAM,EAApB,EAAN,CAAA;ACIQ,AFGV,AFaE,gCIhBoB,SAAS,SAAT,EAAZ;ADJR,ACKQ,AFGV,AFaE,AK1BM,mBFKN,CHqBgB,AK1BN,CL0BV,CK1BY,CFKZ,EELU,CAAM,KDUG,CCVG,GAAZ,CAAJ,KDUuB,GAAV,CAAc,gBAAd,CAAX;AACA,AFIV,AFYE,AK1BqC,SHcvC,IFYW,OEZX,GAAA,IFYE,CAAwB,GIhBL,KAAK,IAAL,CAAU,AJgB7B,EAAuC,OIhBD,EJgBtC,EIhB6B,CJgBsB,EAAnD,EIhB+C,gBAA5B,CAAX;AACG,AFIX,AFaA,AK3BA,QHcM,AFaF,IEbM,GFaC,KAAX,CEbmB,EGdnB,CDUe,ACVf,CDUW,ACVX,CAAA,SHcU,CAAwB,AGdlC,EAAA,SAAO,KAAK,CAAL,CHcG,AGdV,CHcA,AGdA,CAAA,EAAsC;AHetC,AFaA,QAAI,KEbK,GFaG,CAAZ,UEbA,CAAwB,qBAAxB,EAA+C,WAA/C,GAA6D,EAAE,KAA/D;ACXD,ADYA,AFcC,AK/BqC,aL+BrC,MAAA,GAAA;AGxBF,ADWA,AFcI,AK/BF,SFMF,ADWS,SFcK,CGzBd,AENE,CFMoB,EHyBlB,CEdJ,AGjBE,CHiBsB,EEPJ,CCVoB,GDUhB,CDJxB,EAA2C,QCIX,CFOhC,EAA4C,IEPZ,CAAA,CAAA,CAAA,SAAA,AFOhC,CAA6D,CEP7B,CAAA,CAAA,IFOhC,EAAsE,WAAtE;AENM,AFQN,AFcI,AKhCF,SHkBF,GFcQ,UEdR,AFckB,CKhChB,CAAA,CDUS,AFQX,AGlBE,CLgCE,AKhCF,EDUI,GAAW,KAAK,ACVpB,EADsC,CDWvB,CAAS,GAAT,CAAa,QAAb,CAAX;AACA,AFQJ,AFcE,AKjCF,QHmBM,IAAI,AFcF,IAAI,OEdU,EFcD,AKjCd,EDWH,CAAA,CAAA,CAAA,ACXQ,EHmBmB,AGnBjB,MAAF,CDWR,AJsBQ,AKjCS,CDWjB,AJsBgC,AKjCd,EDWZ,GCXiB,CHmBL,CAAwB,AGnBzB,GAAW,GLiCpB,AKjCA,CLiCV,AKjCK,CAAP,CAAA,CAAA,EAAsC,QHmBhB,EAAmE,KAA/E,CAAV;AACA,AFcE,QEdI,EFcF,EEdM,OFcR,CAAY,GEdQ,GFcpB,CAAmB,KEdU,OFc7B,OEdoB,CAAwB,oBAAxB,EAAmE,KAA/E,CAAV;ACdA,ACKI,AFUJ,AFcE,AKnCF,QHqBM,IAAI,IFcA,GKnCV,CLmCE,GG7BF,ACKI,AFUkB,AGrBtB,CFMA,CAAA,CAAA,CCKI,ACXkC,IDW5B,CFUqB,GCf/B,EAAM,EAAE,MAAM,CDeQ,CAAwB,GCfxC,EAAe,MAAM,EAArB,EAAN,CAAA,IDesB,EAAmE,KAA/E,CAAV;AACA,AFcI,AKnCJ,aHqBS,IFcA,MKnCT,CAAA,CAAA,CLmCI,AKnCJ,CHqBA,CAAwB,QGrBxB,EADsC,KHsBtC,EAAyC,KAAzC,CAA+C,eAA/C,GAAiE,SAAO,CAAP,GAAQ,IAAR,GAAa,CAAb,GAAc,IAAd,GAAmB,CAAnB,GAAoB,GAArF;AChBA,ADiBD,AFcO,AKpCN,mBFKA,CH+BU,GG/BV,EELO,GLoCW,EAAR,AKpCE,EAAE,CLoCS,EAAjB,EAAqB,CKpCf,CAAS,KAAK,EAAL,GAAU,GAAnB,CAAL,CAAP,CAAA,CAAA,EAAsC;AFMtC,ACEgC,AFelC,AFcU,SEdD,aFcG,CG/BV,ADiBF,CCjBE,ADiBsB,CCjBtB,CAAA,KH+BQ,CAAY,GG/BpB,AH+BQ,CAAgB,CG/BlB,EAAE,KDiBV,CCjBgB,CDiB8B,EFcpC,GG/BF,EAAgB,MAAM,EAAtB,CDiBR,CCjBE,ADiB6D,CCjB7D,MDiBF,EAAwE,aAAxE;AACA,AFcS,AKtCP,SHwBO,UGxBP,IHwBF,AGxBE,CHwBsB,GGxBgB,iBHwBxC,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ADmBF,AFcQ,AKtCN,SHwBO,UCnBP,IAAA,ADmBF,AGxBE,CHwBsB,AGxBtB,CAAA,CAAA,UAAA,EADsC,MHyBxC,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ACKE,AFeJ,AFcM,AKxCJ,SH0BF,QFcW,EEdX,GAAA,CCpBE,CAAA,CAAA,ACKO,ACXA,CFMP,ECKE,AJ6BE,EKxCQ,CDWC,ACXN,CAAP,EDWgB,CDLhB,EAAM,EAAE,ACKK,EAAX,IDLY,OAAR,EAAiB,MAAM,EAAvB,EAAN,CAAA;ACME,AFeF,AFcM,AKxCN,aH0BS,cEfP,AFeF,CEfE,AFesB,CEftB,CAAA,SAAA,CAAA,EAAM,AFeR,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,OAAxD;ACrBA,ADsBD,AFcO,AK1CN,iBAAA,EFMA,AENsC,CL0C5B,GGpCV,cHoC2B,CAArB,EAAwB;AI9B5B,AFiBJ,AFcU,SEdD,YCtBH,CAAC,CCKH,AFiBJ,CAAwB,GEjBpB,AJ+Ba,II/BP,IDLJ,AHoCI,CEdV,EAAsC,ICtBhC,CAAA,CAAA,CAAA,SAAA,ADsBN,CAAuD,CCtBjD,CAAA,CAAA,IDsBN,EAAgE,UAAhE;ACrBI,ADuBJ,AFaS,AK5CP,SH+BF,UAAA,AG/BE,GH+BF,CCvBI,AERF,CFQE,CAAA,CAAA,CERoC,QFQpC,EAAM,EAAE,MAAM,EAAR,EAAN,CAAA;ADwBF,AFaM,aEbG,cAAT,CAAwB,cAAxB,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;ACxBE,ADyBH,AFcK,iBAAK,EGvCP,IAAA,OHuCE;AIlCH,AFqBH,AFcQ,KI9CL,IFgCM,cAAT,CAAwB,KFcH,CAAb,SEdR,EAAyC,gBAAzC,CAA0D,OAA1D,EAAmE,UAAnE;AEnBG,AFqBH,AFaQ,AK/CP,WDaE,SAAA,AJkCS,CIlCT,OAAA,GAAD,EJkCuB,CAAjB,EAAoB,OIlC1B;AFsBF,AFaU,AK9CV,IAAI,UAAkB,IAAtB,cL8CsB,CAAZ;AEXV,AFYU,AK7CV,SHiCA,AGjCA,KAAA,GAAA,EHiCA,GAAA,KFYiB,QAAP;AEXR,AFYO,AK7CP,QAAM,KHiCG,EGjCI,SAAS,GHiCtB,CAAwB,UGjCX,CAAwB,GHiCrC,EAAwC,KAAxC,CAA8C,KGjCjC,CAAb,CHiCA,GAAwD,OAAxD;AC9BD,AD+BA,AFYO,AK5CN,QAAM,SAAS,QDON,CCPe,KDOX,OAAA,CAAA,CAAA,ACPE,CDOF,ACP0B,SDO1B,EAAA,CAAA,CAAA,KCPE,CAAf;AFGF,ACKM,AF0BN,AFWQ,AK5CN,SFEF,AD+BA,EGjCS,KAAP,GHiCF,AGjCiB,GHiCjB,CGjCE,IFEF,ACKM,CAAA,CAAA,CDLN,ACKM,UAAA,EAAA,SAAO,KAAK,IAAL,CAAU,QAAV,CAAP,CAAA,CAAA,EAA2B;AF2B/B,AFYI,AK7CJ,WAAO,EHiCE,IFYA,AK7CT,GAAgB,IAAhB,GHiCA,CAAwB,CFYpB,aEZJ,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;AE3BI,AF4BL,AFYO,AK5CN,QAAM,MAAM,OAAO,EDIf,IAAA,EJwCe,CAAb,CIxCyB,ACJnB,CAAkB,IAAlB,CAAZ;ADKI,AF6BN,AFWQ,AK5CN,QAAI,CHiCN,KAAA,GAAA,AGjCE,GL4CU,AK5CM,ODIZ,AJwCa,CIxCb,CAAA,ACJJ,CDII,MJwCE,EAAsB,EIxCxB,EAD2B;ADJ/B,ACKI,AF8BJ,AFWQ,AK5CR,QAAI,KHiCK,GGjCT,CAAa,CAAb,EAAgB,CAAhB,EFFA,AEEmB,CFFnB,CAAA,CAAA,CDmCA,AGjCA,CHiCwB,CE9Bb,ACHc,GL4CL,CK5CpB,CDGgB,CJyCR,CG9CR,EAAA,ACKW,CAAU,IF8BrB,EAAyC,ECnClC,GCKI,AF8BX,CE9BI,AF8B2C,CE9B3C,CAAA,IDLJ,CAAA,ADmCA,CCnCA,EAAkB,ADmCuC,MAAzD;AACA,AFWQ,AK3CR,QAAI,QAAQ,CAAZ,UL2Ce,QAAP;AG/CR,ACKI,AFgCJ,AFWO,AK3CP,aAAA,MFLA,EEKA,CAAmB,CFLnB,ACKI,GCAJ,CFLkB,ACKd,CCA6B,EAAjC,EAA2C;AFJ3C,ACKI,AFgCJ,AFWM,AK3CJ,YAAI,SAAJ,EFLF,CAAA,CAAA,CAAA,CCKI,CAAA,CAAA,CAAA,MDLJ,EADkB,ECMd,EAAA,SAAO,KAAK,IAAL,CAAU,UAAV,CAAP,CAAA,CAAA;ADLJ,ADsCD,AFWO,AK3CJ,YAAI,WAAJ,EFNK,CEMa,SAAlB,EFNF,CAAA,CAAA;ACKI,AFmCN,AFWM,AK5CF,SHiCJ,GGjCQ,QHiCR,CAAsB,AGjClB,CHiCJ,CEnCM,CFmC2B,AGjCb,CAAhB,EDFE,MFmCN,EAAmD;ACxCjD,ACMI,AFmCJ,AFWM,AK5CJ,QHiCI,IGjCA,KHiCS,CGjCb,CFRF,AEQa,CL4CH,GGpDV,CHoDc,AK5CI,CAAhB,EDFE,ACEiB,CDFjB,CAAA,AJ8Ce,CI9Cf,ECEsB,CL4CZ,AK5CZ,EL4CI,EEXN,GEnCI,EAAA,SAAO,KAAK,IAAL,CAAU,OAAV,CAAP,CAAA,CAAA;ADLJ,ADyCA,AFWM,AK5CJ,QHiCE,IAAI,AGjCF,MAAJ,CAAW,CL4CH,CEXO,CFWL,AK5CI,CFRhB,AEQE,CFRF,CAAA,AEQmB,CFRnB,CHoDM,CK5CgB,CL4CH,AK5CjB,OFRF,AHoD0B,CEXlB,CCzCR,AD0CE,AFU0B,EEVxB,CAAF,EFUiB,CEVX,GC1CD,ID0CQ,QC1Cf,CAAA,CAAA,CDyCQ,EAEN,EAAE,CAAF,GAAM,OAAO,WAFP,CAAR;AEpCI,AFwCJ,AFQM,AK5CJ,YAAI,MAAJ,KDJE,GJgDY,CIhDZ,AJgDa,EAAE,IAAb;AGrDN,AD8CA,AF5BE,AKRA,WHoCK,EGpCA,GHoCK,EAAE,CC9Cd,CD8CY,GC9CZ,CEUE,CHoCmB,EGpCA,KHoCrB,EAA8B,KGpCC,KAAV,GAAe,WAAf,GAA2B,KAAK,KAAL,CAAW,GAAG,CAAd,CAA3B,GAA2C,IAA3C,GAAgD,KAAK,KAAL,CAAW,GAAG,CAAd,CAAhD,GAAgE,GAAnF;AFTF,AD8CE,AFQA,AK5CA,YHoCI,SAAJ,EC9CF,AD8CiB,CC9CjB,CAAA,CAAA,UAAA,EAAA,SAAO,YAAP,CAAA,CAAA;AD+CI,AFQF,AK5CD,YL4CK,EERA,KFQJ,EAAa,EERX,CAAY,GAAZ,CAAgB,OAAhB;AC/CJ,ADgDG,AFQC,AK3CJ,QAAI,CHiCF,KGjCQ,CHmCD,GGnCK,CFbd,GHwDc,CGxDd,IEac,OAAJ,CAAW,CAAX,EAAc,ML2CY,CK3CL,EAArB,CAAV,EL2Cc,CAAV;AGvDJ,ADgDI,AFQD,AK3CH,QAAM,MHmCA,AGnCM,IAAI,KFbhB,ADgDI,CChDJ,ADgDgB,CChDhB,CAAA,CEagB,GHmCZ,CAAmB,GGnCX,CAAW,CFbvB,EAAA,ADgDI,CGnCQ,EAAiB,CAAjB,CAAZ,IFbO,UAAP,CAAA,CAAA;ACKC,AF4CE,AFQF,AK3CD,KDhBC,GCgBK,OAAO,KAAK,GAAL,CAAb;AFdA,ACOC,AF2CC,AFSF,AK3CA,WDTC,CF2CK,CGlCN,CHkCQ,AFSE,KG3DV,AEgBA,CDTC,CAAA,CCSD,CFhBA,IDkDE,ME3CD,GAAD,AJoDgC,MAAtB,CAAV,KIpDA;ADNA,ADkDC,AFSF,AK3CG,kBAAU,IAAV,CFhBF,CAAA,CAAA,CAAA,UAAA,EAAA,SAAO,WAAW,IAAX,CAAP,CAAA,CAAA;ADmDD,AFtDD,AKqBI,QLrBJ,IKqBU,CLrBV,GAAA,AKqBc,KLrBd,AKqBmB,IAAL,EAAV;AFlBF,ADqDF,AFQA,AK1CI,SHkCJ,AFQA,GK1CQ,CL0CR,CK1CU,EL0CV,GG7DE,AEmBE,EAAa,CHkCjB,CCrDE,ADqDsB,EAAxB,EAAoC,OAApC,EAAsD,OAAtD,EAAsE;ACpDpE,ADqDA,AFQA,AK1CI,QHkCE,AFQF,IERM,GFQV,EAAa,IERM,AGlCN,EFnBb,CAAA,AEmBI,CFnBJ,ACMS,CDNT,AEmBkB,IAAI,CDbT,ECaK,CAAQ,CFnB1B,ADqDU,CAAwB,AGlCN,CFnBtB,CCMO,AF+CH,AFQwB,CG7D1B,ACMK,AF+Cb,CE/Ca,CAAA,ACaK,CAAd,GFnBU,AH6DD,KIvDA,CDNP,CCMO,CDNS,ACMT,CAAA,KDNe,EAAtB,EAAN,CAAA;ACOI,AF+CJ,AFQA,AK1CI,QHkCA,MFQM,IAAV,AK1CU,CHkCK,GGlCD,CHkCd,EAAqB,AGlCX,CAAQ,CDbd,CAAA,ACagB,CDbhB,CAAA,GCaM,CAAN,CHkC2B,EAAV,GE/CjB,EAAA,SAAO,KAAK,IAAL,CAAU,WAAV,CAAP,CAAA,CAAA;ADPJ,ADuDA,AFQD,AK1CI,QHkCC,WCvDJ,ADuDe,ICvDf,ADuDA,EAAqB,UAAU,EAAV;ACtDrB,ACMI,AFiDJ,AFIF,AKtCI,QHkCI,AFIR,IAAA,AKtCQ,CAAC,EHkCM,AFIf,AKtCW,EHkCM,EFIjB,AKtCI,EAAa,EFrBf,ACMI,CDNJ,CAAA,CAAA,CCMI,QDNJ,EAAM,CDuDO,CCvDL,CDuDR,KCvDc,SAAR,EAAmB,MAAM,EAAzB,EAAN,CAAA;ACOI,AFiDJ,AFQF,AK1CM,WHkCG,IAAI,OGlCG,EHkCH,GEjDP,CAAA,CAAA,CAAA,CFiDG,CACL,OAAO,CElDL,EAAA,ECegC,MHmClC,AGnCY,CDfH,ACeP,EHmCmB,GElDP,EFkDY,EElDjB,CAAU,CFkDnB,GAAiC,GElDxB,CAAP,CAAA,AFkDoC,CElDpC,IFkD+B,GAAa,OADzC,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,OAFzC,CAAP;ACxDA,AD4DD,AFKD,AK1CK,mBFvBH,IAAA;AACA,ACMI,AFuDN,AFKA,AK3CG,IHsCG,KFKN,OAAA,CAAmB,IAAnB,CELwB,CC7DtB,ACMI,AJ4D4B,CGlEhC,AD6DF,CC7DE,CAAA,CCMI,QDNJ,EAAM,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AD+DF,AGtCE,SHsCF,KGtCY,OHsCZ,CAAuB,EAAvB,EAAmC,KAAnC,EAAiD,GGtCf,MAAtB,CAAV;AFzBA,ADgEA,AGtCD,QHsCO,IAAI,OChEV,EDgEmB,EChEnB,YDgEU,CAAwB,EAAxB,CAAV;AC/DA,ADgEA,AGhFF,QHgFM,AGhFN,KAAA,GAAA,CHgFe,IAAb,AGhFF,EFgBE,ADgEmB,CChEnB,CAAA,CAAA,KDgE2B,IChE3B,EAAM,EAAE,GDgE8B,EAAE,CChE1B,IDgEa,CAAR,GChEb,EAAkB,MAAM,EAAxB,EAAN,CAAA;ADiEA,AFCA,AKvCF,QHsCQ,CGtCR,IAAA,EHsCe,CGtCf,CHsCiB,WFCH,IAAZ,MEDa,EAAb;ACjEA,ADkEA,AFCA,AKvCA,QHsCM,AGtCF,IHsCM,GGtCV,EHsCe,AGtCF,EF5Bb,GDkEU,CClEV,AHmEA,CAAA,CEDuB,AFCvB,CAAA,SAAA,EAAM,CKvC4B,EHsClC,KGtCa,CLuCb,CAAA;AGlEA,ACMC,AF4DD,AGtCA,KD3BC,GFiEK,MAAM,AGtCF,IAAV,KF5BA,CAAA,CAAA,ADkEuB,CClEvB,CDkEyB,GAAb,CAAZ,IClEA,EAAM,EAAE,MAAM,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;ACQA,AF2DA,AFDA,AKrCD,QHsCO,GE3DN,GF2DY,KFDZ,CI1DA,CAAA,EJ0DA,EECuB,EAAE,CE3DzB,EF2DY,CE3DZ,AF2DA,UE3DS,GAAT,EAAsC;ADRtC,ACSE,AF2DF,AFDA,AKzCF,QH0CQ,AG1CR,IDjBQ,AF2DI,AG1CZ,CH0Ca,EG1Cb,IF1BE,AE0BF,EDjBI,AF2DiB,ECpEnB,AHmEA,CI1DkB,AF2DR,AFDV,CAAA,CAAA,GI1DuB,AF2DI,KE3DzB,CF2D+B,CFDjC,EECU,AFDH,CECP,MFDA,CAAA;AGlEA,ACSE,AF2DF,WAAO,CE3DD,GF2DK,KE3DT,CAAa,EDTf,CAAA,ADoEW,CCpEX,CAAA,ACSoB,GAAL,CAAS,CAAT,AF2DR,CACL,EE5D0B,CDT5B,ACSE,EDTI,ACSyB,EDTvB,ADqEC,GE5D2B,GDTtB,ACSiB,CAAS,CAAT,GAAa,AF4D1C,CE5DA,CDTI,CCSyC,AF4DxB,CCrEA,CCSrB,EAAiD,CF4DvB,CE5D1B,CDT2B,EAAvB,ADqEJ,ECrEF,CAAA,ADqEmC,kBAAkB,EAAnD,GAAwD,IAAI,CADvD,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,EAFzC,CAAP;AE1DC,AF8DF,KEjEC;ADPA,ACWF,AF+DA,AFPC,SEOD,EE/DA,MAAA,EDXE,ED0EF,CAAuB,CC1ErB,CD0EF,EAAmC,CAAnC,EAA4C;AEzG5C,AF0GE,AFNF,CIpGA,EAAA,KF0GQ,CFNR,GEMY,MFNZ,CAAqB,CAArB,CEMqB,CFNS,aEMlB,CAAwB,EAAxB,CAAV;AE9DF,AF+DE,IE/DE,IF+DI,ME/Dc,CF+DP,EAAE,CE/DjB,oBF+De,EAAb;AE7DF,AF8DE,QAAM,CE9DR,GF8DY,EE9DZ,GAAA,AF8DiB,KAAL,GAAa,eAAvB;AC5ED,ACeC,AF8DA,QE9DM,AF8DA,KAAK,IE9DI,GF8DG,ME9DM,KF8Db,GAAqB,KAAK,CE9DtB,CAAwB,EF8D5B,GAAiC,cE9D7B,CAAf,GF8D8D,EAA9D;AC3EF,ACcE,AF8DA,AFTA,IGnEE,ID4EI,GE9DC,CF8DG,EC5EU,ECcpB,CF8De,CC5EjB,CCciB,CF8DL,CAAS,CAAT,CE9DV,CF8DsB,KAAK,GAAL,AFTN,CESe,AFT/B,CESgC,IAAI,EAAL,IAAW,CAApB,EAAuB,CAAvB,CAAZ,CAAV;AC1EF,ACaE,AF8DA,AFTA,QESM,CC3ER,ECaS,GDbT,AD2Ec,GC3Ed,ACaE,GAAgB,GJqDhB,CIrDA,AJqDA,CESuB,AFTvB,CAAA,CESyB,GAAb,CAAZ,IFTA,EAAM,WAAN,CAAA;AGjEA,ACcA,AF6DA,QC3EM,ACcA,AF6DA,MAAM,KC3EK,CCcC,IAAI,CF6DC,EAAE,CC3EC,ECcR,AF6DN,CE7DiB,AF6D7B,KE7DkB,EAAkB,IDdnB,CAAwB,ECcvB,CAAlB,aDdiB,CAAjB;AACA,ACcA,AF6DA,AFXA,MEWE,EE7DI,GF6DN,EC3ES,CD2EC,KFXV,CEWa,CE7DM,EJkDnB,CGhEA,CCcuB,CF6DJ,CC3EI,AD2EH,EC3EpB,ECcmB,CAAW,CF6DJ,GAAP,EE7DA,EAAmB,AF6DL,CAAvB,CAAV,KE7DmB,CAAnB;ADZA,ACcA,AF4DD,QC1EO,KCcN,EDda,KCcb,GAAA,YDdA;AACA,ACcE,AF6DJ,IAAI,IC3EE,ICcI,MAAM,EF6DY,CC3ET,CAAjB,ED2EF,CE7DuB,UAAP,CAAkB,IAAlB,CAAZ;ADZF,ACaE,AF6DJ,SAAA,GE7DQ,CDbN,MAAA,ECaE,AF6DJ,CC1EE,AD0EqB,EE7DH,CF6DpB,EAAkC,ME7D9B;ADZA,ACaA,AF6DF,AFfD,QEeO,IC1EA,ACaA,CF6DK,OE7DT,CAAa,CDbC,ACad,EAAgB,CAAhB,CDbA,CCamB,AF6DI,IE7DvB,EAAyB,CF6DhB,EAAuB,CE7DhC,AF6DS,EAA0B,CAA1B,CAAX;ACzEE,ACaA,AF6DF,AFdF,QEcQ,CFdR,GG5DQ,AD0EI,EC1EF,ED0EM,EE7DF,CF6DF,CAAQ,AFdpB,EEcY,CAAV,AFdF,CG5DQ,CCaJ,CAAkB,EDbE,CAApB,ACaA,EDbuB;AACrB,ACaF,AF6DF,QAAM,IAAI,IC1EA,GCaG,CDbC,CD0EK,IC1EA,CCajB,CAAmB,EDbP,CCaZ,CDbE,ID0EM,CAAwB,cAAxB,CAAV;ACzEI,ACaH,AF6DD,MAAE,KAAF,CAAQ,IC1EA,AD0ER,EC1EU,CD0EQ,EAAE,CAAF,CC1Ed,EAAa,AD0EI,IAArB;ACzEM,ACcN,AF4DA,MAAE,EE5DI,GF4DN,CAAQ,GAAR,CE5Dc,CACZ,CF2De,EC1EP,AD0ES,CAAF,CC1EL,ED0EQ,GC1EV,ACeE,CDfM,AD0ElB,IC1EM,EAAkB,ACetB,CAAkB,SAAlB,CADY,EAEZ,WAAW,YAAX,CAAwB,UAAxB,CAFY,CAAd;ADbQ,ACkBR,AFwDA,AFjBA,QEiBI,KExDJ,MAAA,EFwDA,CExDA,CFwDmB,AFjBnB,CAAA,CAAA,CAAA,GGzDiB,MD0Ec,AFjB/B,EAAM,GGzDE,IAAwB,EAAE,ED0Ef,EAA2B,AFjB9C,CGzDgC,AHyDhC,CGzDwC,GD0ErB,CC1EX;AACD,ACkBL,AFwDF,aExDmB,GFwDP,CExDO,EFwDnB,EAAiB,CExDE,CAAA,EAAA,AFwDnB,UExDmB,KAAjB,EAAiB,KAAA,QAAA,MAAjB,EAAiB,IAAjB,EAAsB;ADjBlB,ACiBC,AFyDP,AFnBA,gBItCW,GJsCX,CEmBgB,GEzDD,AJsCf,CEmBoB,KC1ED,AD0EH,EC1EK,ACiBN,AFyDf,EEzDe,CAAR,EDjBY,CAAQ,IAArB;AACD,ACgBqB,AF0D3B,iBE1DgC,IAAL;ADftB,ACeiC,AF4DvC,SAAA,OAAA,CAAkB,GAAlB,EC3EgB,AD2Ea,CC3EZ,EAAE,IAAb;AACD,ACeD,AF4DF,QAAM,IAAI,SAAS,cAAT,CAAwB,eAAxB,CAAV;AC1EE,ACeA,AF4DF,AFvBD,MEuBG,MC3EI,KD2EN,CE5DY,CDfV,CD2Ec,CC3ED,ED2Ef,iBE5DkC,MAAtB,CAAV;ADdE,ACeH,AF4DD,AFtBF,MEsBI,GFtBJ,EEsBE,CAAQ,OAAR,AFtBF,GGrDgB,AD2EI,AFtBpB,OEsBE,eC3EoC,MAAtB,CAAV;AACD,ACgBH,AF2DD,cE3DW,sBAAsB,MAAtB,CAAV;ADfC,ACgBF,AF4DD,SAAA,aAAA,GAAA;AC1EE,ACdF,AFyFE,QEzFF,AFyFQ,IAAI,CEzFZ,CDcY,ECdZ,KAAA,AFyFqB,cAAT,CC3EsB,AD2EE,MC3ExB,CAAV,QD2EU,CAAV;AC1ED,ACeD,AF4DE,AF1BA,ME0BE,GE5DJ,EF4DE,CAAQ,CE5DV,GAAA,GF4DE,GAAkB,CF1BlB,CAAA,CAAA,CAAA,GE0BA,MF1BA,EAAM,YAAN,CAAA;AG1EF,ACyCE,AF4DD,QCrGD,ACyCM,KDzCN,ECyCE,CDzCF,CCyCe,IDzCf,iBCyCoC,OAArB;ADdf,ACeE,AF6DF,AF7BE,SG/CF,AD4EA,IC5EA,CCeY,EDfZ,ECeE,CJgCA,IE6BF,AF7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","file":"src.48f7ac3e.map","sourceRoot":"..","sourcesContent":["///////////////////////////////////////////////////////////////////////////\n// Main game system and API implementations\n\nlet mode: string\n\nlet limitKeys: string[]\nlet lastKey: string\nwindow.addEventListener('keydown', (e: KeyboardEvent) => {\n  if (mode !== 'waitKey') return\n  if (limitKeys && limitKeys.indexOf(e.key) < 0) return\n  lastKey = e.key\n  mode = 'normal'\n  limitKeys = null\n})\n\nlet luminance: number\nfunction updateLuminance () {\n  const e = document.getElementById('inn-content')\n  e.style.background = `rgb(${luminance}, ${luminance}, ${luminance})`\n}\n\nfunction message (msg: string) {\n  const e = document.createElement('div') as HTMLDivElement\n  e.textContent = msg\n  document.getElementById('inn-content').appendChild(e)\n}\n\nlet waitingFrames: number\n\nlet request: number = null\n\nexport function start () {\n  mode = 'normal'\n  limitKeys = null\n  lastKey = null\n  luminance = 255\n  updateLuminance()\n  waitingFrames = 0\n  document.getElementById('inn-content').innerHTML = ''\n\n  let iter = inn()\n  let frame = 0\n\n  function update () {\n    request = null\n\n    let isAlive = true\n    const e = document.getElementById('inn-content')\n    e.classList.remove('showCursor')\n    switch (mode) {\n      case 'waitKey':\n        if (frame % 60 < 30) {\n          e.classList.add('showCursor')\n        }\n        break\n\n      case 'waitFrame':\n        waitingFrames--\n        if (waitingFrames <= 0) {\n          mode = 'normal'\n        }\n        break\n\n      case 'waitFadeOut':\n        luminance -= 5\n        if (luminance <= 0) {\n          luminance = 0\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      case 'waitFadeIn':\n        luminance += 5\n        if (255 <= luminance) {\n          luminance = 255\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      default:\n        let r = iter.next()\n        if (r.value) mode = r.value\n        isAlive = !r.done\n    }\n    frame++\n    if (isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction* waitKey (keys?: string[]): IterableIterator<string> {\n  limitKeys = keys\n  yield 'waitKey'\n  return lastKey\n}\n\nfunction* waitFrame (f: number): IterableIterator<string> {\n  waitingFrames = f\n  yield 'waitFrame'\n}\n\nfunction* waitFadeOut (): IterableIterator<string> {\n  yield 'waitFadeOut'\n}\n\nfunction* waitFadeIn (): IterableIterator<string> {\n  yield 'waitFadeIn'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Scenario implementations\n\nfunction* inn (): Iterator<string> {\n  message('Welcome to the traveler\\'s Inn.')\n  message('Room and board is 6 GOLD per night.')\n  message('Dost thou want a room? (Y/N)')\n  const key = yield* waitKey(['y', 'n'])\n\n  if (key === 'y') {\n    message('Good night.')\n    yield* waitFrame(30)\n    yield* waitFadeOut()\n    yield* waitFrame(30)\n    // player.money -= 6\n    // player.hp = player.maxHP\n    // player.mp = player.maxMP\n    yield* waitFadeIn()\n    message('Good morning.')\n    message('Thou hast had a good night\\'s sleep I hope.')\n    yield* waitKey()\n  }\n\n  message('I shall see thee again.')\n  yield* waitKey()\n}\n","export default class Vector {\n  x: number\n  y: number\n\n  constructor (x: number = .0, y: number = .0) {\n    this.x = x\n    this.y = y\n  }\n\n  clone (): Vector {\n    return new Vector(this.x, this.y)\n  }\n\n  size (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  add (v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y)\n  }\n\n  sub (v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y)\n  }\n\n  mul (r: number): Vector {\n    return new Vector(this.x * r, this.y * r)\n  }\n\n  div (r: number): Vector {\n    return new Vector(this.x / r, this.y / r)\n  }\n\n  normalize (): Vector {\n    return this.div(this.size())\n  }\n\n  rotate (rad: number): Vector {\n    const c = Math.cos(rad)\n    const s = Math.sin(rad)\n    return new Vector(\n      this.x * c - this.y * s,\n      this.x * s + this.y * c\n    )\n  }\n\n  lerp (v: Vector, r: number): Vector {\n    return new Vector(\n      this.x * (1 - r) + v.x * r,\n      this.y * (1 - r) + v.y * r\n    )\n  }\n}\n","import Vector from './vector'\n\nlet request: number = null\nlet iters: IterableIterator<{}>[]\n\nexport function start () {\n  iters = [ guide() ]\n\n  function update () {\n    for (let iter of iters) iter.next()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n  iters = []\n  reset()\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Event handlers\n\nfunction updateTitle () {\n  const e = document.getElementById('guide-form-title') as HTMLInputElement\n  document.getElementById('guide-preview-title').textContent = e.value\n}\ndocument.getElementById('guide-form-title').addEventListener('input', updateTitle)\n\nfunction updateBgColor () {\n  const r = parseFloat((document.getElementById('guide-form-color-r') as HTMLInputElement).value)\n  const g = parseFloat((document.getElementById('guide-form-color-g') as HTMLInputElement).value)\n  const b = parseFloat((document.getElementById('guide-form-color-b') as HTMLInputElement).value)\n  document.getElementById('guide-preview').style.backgroundColor = `rgb(${r}, ${g}, ${b})`\n}\ndocument.getElementById('guide-form-color-r').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-g').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-b').addEventListener('input', updateBgColor)\n\nfunction showDialog () {\n  document.getElementById('guide-dialog').style.display = 'block'\n}\ndocument.getElementById('guide-open').addEventListener('click', showDialog)\n\nfunction hideDialog () {\n  document.getElementById('guide-dialog').style.display = 'none'\n}\ndocument.getElementById('guide-form-ok').addEventListener('click', hideDialog)\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction showCursor () {\n  document.getElementById('guide-cursor').style.display = 'block'\n}\n\nfunction hideCursor () {\n  document.getElementById('guide-cursor').style.display = 'none'\n}\n\nfunction reset () {\n  document.getElementById('guide-message').style.display = 'none'\n  hideDialog()\n  hideCursor()\n  disableBlocker()\n}\n\nfunction updateHover (p: Vector, isFocused: boolean) {\n  const revert = disableBlockerTemp()\n  let e = document.elementFromPoint(\n    p.x - window.pageXOffset,\n    p.y - window.pageYOffset\n  )\n  revert()\n  while (e && e.id !== 'guide') {\n    if (isFocused) {\n      e.classList.add('hover')\n    } else {\n      e.classList.remove('hover')\n    }\n    e = e.parentElement\n  }\n}\n\nfunction getElementPos (id: string, anchorX?: number, anchorY?: number): Vector {\n  const e = document.getElementById(id) as HTMLElement\n  if (anchorX == null) anchorX = .5\n  if (anchorY == null) anchorY = .5\n  const rect = e.getBoundingClientRect()\n  return new Vector(\n    window.pageXOffset + rect.left + rect.width * anchorX,\n    window.pageYOffset + rect.top + rect.height * anchorY\n  )\n}\n\nconst sliderThumbSize = 12\n\nfunction getSliderPos (id: string, value?: number): Vector {\n  const e = document.getElementById(id) as HTMLInputElement\n  if (value == null) value = parseFloat(e.value)\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  const r = (value - min) / (max - min)\n  return new Vector(\n    window.pageXOffset + rect.left + sliderThumbSize * .5 + w * r,\n    window.pageYOffset + rect.top + rect.height * .5\n  )\n}\n\nfunction setSliderPos (id: string, x: number) {\n  const e = document.getElementById(id) as HTMLInputElement\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const x0 = window.pageXOffset + rect.left + sliderThumbSize * .5\n  const r = Math.max(0, Math.min((x - x0) / w, 1))\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  e.value = `${min + (max - min) * r}`\n}\n\nlet lastCursorPos: Vector = null\nfunction setCursorPos (pos: Vector) {\n  const p0 = getElementPos('guide', 0, 0)\n  const p = pos.sub(p0)\n  const e = document.getElementById('guide-cursor') as HTMLElement\n  e.style.left = `${p.x}px`\n  e.style.top = `${p.y}px`\n  if (lastCursorPos) updateHover(lastCursorPos, false)\n  updateHover(pos, true)\n  lastCursorPos = pos.clone()\n}\n\nfunction message (msg: string) {\n  const e = document.getElementById('guide-message') as HTMLDivElement\n  e.textContent = msg\n  e.style.display = 'block'\n}\n\nfunction enableBlocker () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  e.style.display = 'block'\n}\n\nfunction disableBlocker () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  e.style.display = 'none'\n}\n\nfunction disableBlockerTemp () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  const d = e.style.display\n  e.style.display = 'none'\n  return function () {\n    e.style.display = d\n  }\n}\n\nfunction easingIn (v: number): number {\n  return v * v * v\n}\n\nfunction easingOut (v: number): number {\n  return 1 - easingIn(1 - v)\n}\n\nfunction easingInOut (v: number): number {\n  if (.5 < v) return 1 - easingInOut(1 - v)\n  return easingIn(v * 2) * .5\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Guide implementations\n\n// const waitFrames = 3\n// const longWaitFrames = 12\n// const baseMoveFrames = 1\n// const moveFramesPerDistance = .01\n// const beforeTypeFrames = 2\n// const typeFrames = 1\n\nconst waitFrames = 30\nconst longWaitFrames = 120\nconst baseMoveFrames = 15\nconst moveFramesPerDistance = .15\nconst beforeTypeFrames = 20\nconst typeFrames = 4\n\nconst clickEffectFrames = 30\n\nconst exampleTitles = [\n  'JavaScript tutorial',\n  'My diary'\n]\nconst exampleColors = [\n  [ 128, 192, 255 ],\n  [ 255, 255, 128 ]\n]\nlet trial = 0\n\nfunction *wait (frames: number): IterableIterator<{}> {\n  while (0 < frames--) {\n    yield // wait 1 frame\n  }\n}\n\nfunction *moveTo (to: Vector, fn?: (r: number, p: Vector) => void): IterableIterator<{}> {\n  const from = lastCursorPos.clone()\n  const distance = to.sub(from).size()\n  const frames = Math.ceil(baseMoveFrames + distance * moveFramesPerDistance)\n  for (let i = 1; i < frames; i++) {\n    const r = easingInOut(i / (frames - 1))\n    const p = from.lerp(to, r)\n    setCursorPos(p)\n    if (fn) fn(r, p)\n    yield // wait 1 frame\n  }\n  setCursorPos(to)\n  if (fn) fn(1.0, to)\n  yield // wait 1 frame\n}\n\nfunction *moveSlider (id: string, valueTo: number, fn: () => void): IterableIterator<{}> {\n  yield* moveTo(getSliderPos(id))\n  yield* moveTo(getSliderPos(id, valueTo), (r: number, p: Vector) => {\n    setSliderPos(id, p.x)\n    if (fn) fn()\n  })\n}\n\nfunction *inputText (id: string, text: string, fn?: (e: HTMLInputElement, text: string) => void): IterableIterator<{}> {\n  const e = document.getElementById(id) as HTMLInputElement\n  e.focus()\n  e.setSelectionRange(0, e.value.length)\n  yield* wait(beforeTypeFrames)\n  for (let i = 1; i <= text.length; i++) {\n    e.value = text.substr(0, i)\n    if (fn) fn(e, e.value)\n    yield* wait(typeFrames)\n  }\n}\n\nfunction addClickEffect () {\n  iters.push(function* (): IterableIterator<{}> {\n    const p0 = getElementPos('guide', 0, 0)\n    const p = lastCursorPos.sub(p0)\n\n    const e = document.createElement('div')\n    e.classList.add('guide-click-effect')\n    document.getElementById('guide').appendChild(e)\n    e.style.left = `${p.x}px`\n    e.style.top = `${p.y}px`\n\n    for (let i = 1; i <= clickEffectFrames; i++) {\n      const s = easingOut(i / clickEffectFrames)\n      e.style.transform = `translate(-50%, -50%) scale(${s}, ${s})`\n      e.style.opacity = `${1 - s}`\n      yield\n    }\n    e.remove()\n  }())\n}\n\nfunction* waitDialogShown (): IterableIterator<{}> {\n  while (document.getElementById('guide-dialog').style.display === 'none') {\n    yield // wait 1 frame\n  }\n}\n\nfunction* waitDialogHidden (): IterableIterator<{}> {\n  while (document.getElementById('guide-dialog').style.display !== 'none') {\n    yield // wait 1 frame\n  }\n}\n\nfunction* guide (): IterableIterator<{}> {\n  reset()\n  enableBlocker()\n  setCursorPos(getElementPos('guide'))\n  showCursor()\n  yield* wait(waitFrames)\n\n  message('To customize theme, click the gear icon at top-right.')\n  yield* wait(waitFrames)\n  yield* moveTo(getElementPos('guide-open'))\n  yield* wait(waitFrames)\n  addClickEffect()\n  showDialog()\n  message('The settings dialog is appeared.')\n  yield* wait(longWaitFrames)\n\n  message('Input your blog title.')\n  yield* wait(waitFrames)\n  yield* moveTo(getElementPos('guide-form-title', .9))\n  yield* wait(waitFrames)\n  const title = exampleTitles[trial % exampleTitles.length]\n  addClickEffect()\n  yield* inputText('guide-form-title', title, () => updateTitle())\n  yield* wait(waitFrames)\n\n  message('Change background color.')\n  yield* wait(waitFrames)\n  const color = exampleColors[trial % exampleColors.length]\n  yield* moveSlider('guide-form-color-r', color[0], () => updateBgColor())\n  yield* moveSlider('guide-form-color-g', color[1], () => updateBgColor())\n  yield* moveSlider('guide-form-color-b', color[2], () => updateBgColor())\n  trial++\n  yield* wait(waitFrames)\n\n  message('Click \"OK\" button.')\n  yield* wait(waitFrames)\n  yield* moveTo(getElementPos('guide-form-ok'))\n  yield* wait(waitFrames)\n  addClickEffect()\n  hideDialog()\n  yield* wait(longWaitFrames)\n\n  hideCursor()\n  disableBlocker()\n  message('Your turn now. Click the gear icon.')\n  yield* waitDialogShown()\n\n  message('Good. Cutomize your own blog and click \"OK\" button.')\n  yield* waitDialogHidden()\n\n  message('Excellent! This is the end of this tutorial.')\n  yield* wait(longWaitFrames)\n\n  reset()\n}\n","const bpm = 160 // tempo\nconst n8 = Math.round(60 * 60 / bpm / 2) // frame count of 8th note\nconst n4 = n8 * 2\nconst n4d = n8 * 3\nconst n1 = n8 * 8\n\ninterface MessageFrame {\n  text?: string\n  wait?: number\n}\n\nfunction* maryHadA (): IterableIterator<MessageFrame> {\n  yield { text: 'Ma', wait: n4d } // `resume()` returns this value and\n                                  // wait `n4d` frames with suspending here\n  yield { text: 'ry ', wait: n8 }\n  yield { text: 'had ', wait: n4 }\n  yield { text: 'a ', wait: n4 }\n}\n\nfunction* littleLamb (withoutRest?: boolean): IterableIterator<MessageFrame> {\n  yield { text: 'lit', wait: n4 }\n  yield { text: 'tle ', wait: n4 }\n  yield { text: 'lamb ', wait: n4 }\n  if (!withoutRest) {\n    yield { wait: n4 }\n  }\n}\n\nfunction* maryHadALittleLamb (): IterableIterator<MessageFrame> {\n  yield* maryHadA() // To go to another iterator and come back, just yield it\n  yield* littleLamb()\n  yield* littleLamb()\n  yield* littleLamb()\n  yield* maryHadA()\n  yield* littleLamb(true)\n  yield { text: 'its ', wait: n4 }\n  yield { text: 'fleece ', wait: n4 }\n  yield { text: 'was ', wait: n4 }\n  yield { text: 'white ', wait: n4 }\n  yield { text: 'as ', wait: n4 }\n  yield { text: 'snow ', wait: n1 }\n}\n\nlet request: number = null\n\nexport function start () {\n  const textarea = document.getElementById('basic-textarea') as HTMLTextAreaElement\n  textarea.textContent = ''\n\n  const iter = maryHadALittleLamb()\n  let waitFrames = 0\n\n  function update () {\n    let isAlive = true\n    if (--waitFrames <= 0) {\n      const v = iter.next()\n      if (v.value) {\n        if (v.value.text) {\n          textarea.textContent += v.value.text\n        }\n        waitFrames = v.value.wait\n      }\n      isAlive = !v.done\n    }\n    if (isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import Vector from './vector'\n\nconst size = 300\nconst topLeft = new Vector(size * .3, size * .3)\nconst topRight = new Vector(size * .7, size * .3)\nconst bottomRight = new Vector(size * .7, size * .7)\nconst bottomLeft = new Vector(size * .3, size * .7)\nconst absoluteVelocity = 3\n\nclass Sprite {\n  style: string\n  pos: Vector\n\n  constructor (style: string, pos: Vector) {\n    this.style = style\n    this.pos = pos.clone()\n  }\n\n  *move (to: Vector): IterableIterator<{}> {\n    const distance = to.sub(this.pos)\n    const direction = distance.normalize()\n    const velocity = direction.mul(absoluteVelocity)\n    const division = Math.ceil(distance.size() / absoluteVelocity)\n    for (let i = 1; i < division; i++) {\n      this.pos = this.pos.add(velocity)\n      yield // wait 1 frame\n    }\n    this.pos = to.clone()\n    yield // wait 1 frame\n  }\n\n  *goRound (): IterableIterator<{}> {\n    while (true) {\n      yield* this.move(topRight) // To go to another iterator and come back, just yield it\n      yield* this.move(bottomRight)\n      yield* this.move(bottomLeft)\n      yield* this.move(topLeft)\n    }\n  }\n\n  *backAndForth (): IterableIterator<{}> {\n    while (true) {\n      yield* this.move(bottomRight)\n      yield* this.move(topLeft)\n    }\n  }\n\n  repaint (ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = this.style\n    ctx.fillRect(this.pos.x - 8, this.pos.y - 8, 16, 16)\n  }\n}\n\nlet request: number = null\n\nexport function start () {\n  const canvas = document.getElementById('concurrent-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const redSprite = new Sprite('red', topLeft)\n  const blueSprite = new Sprite('blue', topLeft)\n\n  function repaint () {\n    const ctx = canvas.getContext('2d')\n    ctx.fillStyle = '#eeeeee'\n    ctx.fillRect(0, 0, size, size)\n    redSprite.repaint(ctx)\n    blueSprite.repaint(ctx)\n  }\n\n  const iters = [\n    redSprite.goRound(redSprite),\n    blueSprite.backAndForth(blueSprite)\n  ]\n\n  function update () {\n    for (let iter of iters) iter.next()\n    repaint()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import Vector from './vector'\n\nconst eps = 2.0\nconst size = 300\n\nfunction* koch (v: Vector): IterableIterator<Vector> {\n  if (v.size() <= eps) {\n    yield v // next().value returns v and wait 1 frame\n            // (different from `return v`, be careful)\n    return // back to the caller iterator (with no return value)\n  }\n  const t = v.mul(1.0 / 3.0)\n                                       // ＿/\\＿\n  yield* koch(t)                        // ＿\n  yield* koch(t.rotate(-Math.PI / 3.0)) //   /\n  yield* koch(t.rotate(Math.PI / 3.0))  //    \\\n  yield* koch(t)                        //     ＿\n  // back to the caller iterator (with no return value)\n}\n\nlet request: number = null\n\nexport function start () {\n  const info = document.getElementById('recursion-info') as HTMLDivElement\n\n  const canvas = document.getElementById('recursion-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const ctx = canvas.getContext('2d')\n  ctx.fillStyle = '#eeeeee'\n  ctx.fillRect(0, 0, size, size)\n\n  let frame = 0\n  function drawLine (from: Vector, to: Vector) {\n    ctx.beginPath()\n    ctx.strokeStyle = '#000000'\n    ctx.lineWidth = 1\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n    ctx.stroke()\n    info.textContent = `frame: ${frame} / pos: (${Math.round(to.x)}, ${Math.round(to.y)})`\n    frame++\n  }\n\n  let pos = new Vector(0, size * .8)\n  const vec = new Vector(size, 0)\n  const iter = koch(vec)\n\n  function update () {\n    request = null\n\n    const r = iter.next()\n    if (r.value) {\n      drawLine(pos, pos.add(r.value))\n      pos = pos.add(r.value)\n    }\n    if (!r.done) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as inn from './inn'\nimport * as guide from './guide'\nimport * as basic from './basic'\nimport * as concurrent from './concurrent'\nimport * as recursion from './recursion'\n\ninterface Demo {\n  start (): void\n  stop (): void\n}\n\nconst examples: {[name: string]: Demo} = {\n  inn,\n  guide,\n  basic,\n  concurrent,\n  recursion\n}\n\nconst buttons = document.getElementById('buttons') as HTMLDivElement\nbuttons.innerHTML = ''\nlet currentDemo: Demo = null\n\nfor (let name in examples) {\n  const button = document.createElement('button') as HTMLButtonElement\n  button.textContent = name\n  buttons.appendChild(button)\n  button.addEventListener('click', function (button: HTMLButtonElement, name: string) {\n    button.blur()\n    startDemo(name)\n  }.bind(null, button, name))\n}\n\nfunction startDemo (name: string) {\n  if (window.location.hash.length < 2 || window.location.hash.substr(1) !== name) {\n    window.location.hash = '#' + name\n  }\n  const demo = examples[name]\n  const divs = document.getElementsByClassName('example')\n  for (let i = 0; i < divs.length; i++) {\n    divs[i].classList.remove('visible')\n  }\n  document.getElementById(name).classList.add('visible')\n  if (currentDemo) currentDemo.stop()\n  demo.start()\n  currentDemo = demo\n}\n\nfunction onHashChange () {\n  if (2 <= window.location.hash.length) {\n    const name = window.location.hash.substr(1)\n    for (let n in examples) {\n      if (name === n) {\n        startDemo(name)\n        break\n      }\n    }\n  }\n}\nwindow.addEventListener('hashchange', onHashChange)\nonHashChange()\n"]}